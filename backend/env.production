# TaktMate Backend Environment Configuration - PRODUCTION
# This file should be used as a template for production deployment
# Actual secrets should be stored in Azure Key Vault

# ============================================================================
# AZURE CONFIGURATION
# ============================================================================

# Azure Key Vault Configuration
AZURE_KEY_VAULT_NAME=taktmate-kv-prod
AZURE_KEY_VAULT_URL=https://taktmate-kv-prod.vault.azure.net/

# Azure Application Insights Configuration
APPINSIGHTS_CONNECTION_STRING=@Microsoft.KeyVault(VaultName=taktmate-kv-prod;SecretName=AppInsights-ConnectionString)
APPINSIGHTS_INSTRUMENTATION_KEY=@Microsoft.KeyVault(VaultName=taktmate-kv-prod;SecretName=AppInsights-InstrumentationKey)
APPLICATIONINSIGHTS_CONNECTION_STRING=@Microsoft.KeyVault(VaultName=taktmate-kv-prod;SecretName=AppInsights-ConnectionString)

# ============================================================================
# AZURE AD B2C CONFIGURATION
# ============================================================================

# Azure AD B2C Tenant Configuration
AZURE_AD_B2C_TENANT_NAME=taktmate
AZURE_AD_B2C_TENANT_ID=@Microsoft.KeyVault(VaultName=taktmate-kv-prod;SecretName=Azure-AD-B2C-Tenant-ID)
AZURE_AD_B2C_CLIENT_ID=@Microsoft.KeyVault(VaultName=taktmate-kv-prod;SecretName=Azure-AD-B2C-Client-ID)
AZURE_AD_B2C_CLIENT_SECRET=@Microsoft.KeyVault(VaultName=taktmate-kv-prod;SecretName=Azure-AD-B2C-Client-Secret)

# Azure AD B2C Endpoints
AZURE_AD_B2C_AUTHORITY=https://taktmate.b2clogin.com/taktmate.onmicrosoft.com/B2C_1_SignUpSignIn
AZURE_AD_B2C_KNOWN_AUTHORITY=taktmate.b2clogin.com
AZURE_AD_B2C_DISCOVERY_ENDPOINT=https://taktmate.b2clogin.com/taktmate.onmicrosoft.com/B2C_1_SignUpSignIn/v2.0/.well-known/openid_configuration

# Azure AD B2C Policies
AZURE_AD_B2C_SIGNUP_SIGNIN_POLICY=B2C_1_SignUpSignIn
AZURE_AD_B2C_EDIT_PROFILE_POLICY=B2C_1_EditProfile
AZURE_AD_B2C_RESET_PASSWORD_POLICY=B2C_1_ResetPassword

# Azure AD B2C Scopes
AZURE_AD_B2C_SCOPE=https://taktmate.onmicrosoft.com/api/read

# ============================================================================
# EXTERNAL SERVICE CONFIGURATION
# ============================================================================

# OpenAI Configuration
OPENAI_API_KEY=@Microsoft.KeyVault(VaultName=taktmate-kv-prod;SecretName=OpenAI-API-Key)
OPENAI_MODEL=gpt-4
OPENAI_MAX_TOKENS=2048
OPENAI_TEMPERATURE=0.7
OPENAI_TIMEOUT=30000

# ============================================================================
# APPLICATION CONFIGURATION
# ============================================================================

# Server Configuration
NODE_ENV=production
PORT=3001
HOST=0.0.0.0

# CORS Configuration
CORS_ORIGIN=https://app.taktmate.com
CORS_CREDENTIALS=true

# Security Configuration
JWT_SECRET=@Microsoft.KeyVault(VaultName=taktmate-kv-prod;SecretName=JWT-Secret)
SESSION_SECRET=@Microsoft.KeyVault(VaultName=taktmate-kv-prod;SecretName=Session-Secret)

# File Upload Configuration
MAX_FILE_SIZE=5242880
ALLOWED_FILE_TYPES=text/csv,application/vnd.ms-excel
UPLOAD_TIMEOUT=30000

# ============================================================================
# LOGGING AND MONITORING CONFIGURATION
# ============================================================================

# Logging Configuration
LOG_LEVEL=warn
LOG_FORMAT=json
LOG_FILE_ENABLED=true
LOG_CONSOLE_ENABLED=true

# Application Insights Configuration
APPINSIGHTS_ENABLE_AUTO_COLLECT_CONSOLE=true
APPINSIGHTS_ENABLE_AUTO_COLLECT_EXCEPTIONS=true
APPINSIGHTS_ENABLE_AUTO_COLLECT_REQUESTS=true
APPINSIGHTS_ENABLE_AUTO_COLLECT_PERFORMANCE=true
APPINSIGHTS_ENABLE_AUTO_COLLECT_DEPENDENCIES=true
APPINSIGHTS_ENABLE_AUTO_COLLECT_HEARTBEAT=true
APPINSIGHTS_ENABLE_WEB_INSTRUMENTATION=false
APPINSIGHTS_ENABLE_LIVE_METRICS=true
APPINSIGHTS_ENABLE_DISK_CACHING=true
APPINSIGHTS_SAMPLING_PERCENTAGE=100

# Custom Telemetry Configuration
ENABLE_CUSTOM_TELEMETRY=true
ENABLE_CSV_TELEMETRY=true
ENABLE_PERFORMANCE_MONITORING=true
ENABLE_ERROR_TRACKING=true
ENABLE_RESOURCE_MONITORING=true

# Azure Monitor Configuration
AZURE_MONITOR_RESOURCE_GROUP=taktmate-prod-rg
AZURE_MONITOR_RESOURCE_NAME=taktmate-api-prod
AZURE_MONITOR_LOCATION=eastus

# ============================================================================
# PERFORMANCE AND SCALING CONFIGURATION
# ============================================================================

# Performance Configuration
REQUEST_TIMEOUT=30000
KEEP_ALIVE_TIMEOUT=5000
HEADERS_TIMEOUT=60000

# Rate Limiting Configuration
RATE_LIMIT_WINDOW=900000
RATE_LIMIT_MAX=100
RATE_LIMIT_SKIP_SUCCESS_REQUESTS=false

# Memory Management
NODE_OPTIONS=--max-old-space-size=2048

# ============================================================================
# FEATURE FLAGS
# ============================================================================

# Feature Toggle Configuration
FEATURE_ADVANCED_ANALYTICS=true
FEATURE_BULK_OPERATIONS=true
FEATURE_EXPORT_FUNCTIONALITY=true
FEATURE_REAL_TIME_COLLABORATION=false

# ============================================================================
# PRODUCTION SPECIFIC CONFIGURATION
# ============================================================================

# Production-specific configuration
DEBUG=false
TRUST_PROXY=true
SECURE_COOKIES=true
HTTP_STRICT_TRANSPORT_SECURITY=true
CONTENT_SECURITY_POLICY=true

# SSL/TLS Configuration
FORCE_HTTPS=true
HSTS_MAX_AGE=31536000
HSTS_INCLUDE_SUBDOMAINS=true

# Production Monitoring
ENABLE_HEALTH_CHECKS=true
HEALTH_CHECK_ENDPOINT=/api/health
ENABLE_METRICS_ENDPOINT=true
METRICS_ENDPOINT=/api/metrics

# Production Error Handling
SEND_ERROR_DETAILS=false
LOG_STACK_TRACES=true
ENABLE_ERROR_REPORTING=true
